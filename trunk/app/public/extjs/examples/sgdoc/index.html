<html>
    <head>
        <title>Modelo Layout - SGDoc v.3</title>
        <link rel="stylesheet" type="text/css" href="../../resources/css/ext-all.css" />

        <style type="text/css">
            html, body {
                font:normal 12px verdana;
                margin:0;
                padding:0;
                border:0 none;
                overflow:hidden;
                height:100%;
            }
            p {
                margin:5px;
            }
            .settings {
                background-image:url(../shared/icons/fam/folder_wrench.png);
            }
            .nav {
                background-image:url(../shared/icons/fam/folder_go.png);
            }
            .img-center{
                padding: 5px;
                float: left;
                margin: 0 auto;
                width: 48px;
                height: 48px;
            }
        </style>

        <!-- GC -->
        <!-- LIBS -->
        <script type="text/javascript" src="../../adapter/ext/ext-base.js"></script>
        <!-- ENDLIBS -->

        <script type="text/javascript" src="../../ext-all.js"></script>

        <!-- EXAMPLES -->
        <script type="text/javascript" src="../shared/examples.js"></script>

        <!-- BUTTONS -->
        <script type="text/javascript" src="../form/states.js"></script>
        <script type="text/javascript" src="../button/buttons.js"></script>
        <link rel="stylesheet" type="text/css" href="../button/buttons.css"/>

        <script type="text/javascript">
            Ext.onReady(function(){
              

                /*                                     SGDOC-INICIO                                   */
                               
                var divArvoreMenus = '<div id="tree-div">';
                var divCaixaSaida = '<div id="caixa-saida-div">';
                var divCaixaEntrada = '<div id="caixa-entrada-div">';
                var urlArvoreMenus = 'arvore-menus.php';
                var imgCabecalho   = '<img src="https://www3.icmbio.gov.br/sgdoc/protocolo/gerenciador/images/logo.png"><p>Informacoes do Cabecalho (SGDoc v.3)</p>';
                var Tree = Ext.tree;

                var tree = new Tree.TreePanel({
                    useArrows: true,
                    autoScroll: true,
                    animate: true,
                    enableDD: true,
                    containerScroll: true,
                    border: false,
                    // auto create TreeLoader
                    dataUrl: urlArvoreMenus,
                   
                    root: {
                        rootVisible: false,
                        nodeType: 'async',
                        text: 'Area de Trabalho',
                        draggable: true,
                        id: 'src'
                    }
                });

              

                // NOTE: This is an example showing simple state management. During development,
                // it is generally best to disable state management as dynamically-generated ids
                // can change across page loads, leading to unpredictable results.  The developer
                // should ensure that stable state ids are set for stateful components in real apps.
                Ext.state.Manager.setProvider(new Ext.state.CookieProvider());

                // sample static data for the store
                var myData = [
                    ['3m Co',71.72,0.02,0.03,'9/1 12:00am'],
                    ['Alcoa Inc',29.01,0.42,1.47,'9/1 12:00am'],
                    ['Altria Group Inc',83.81,0.28,0.34,'9/1 12:00am'],
                    ['American Express Company',52.55,0.01,0.02,'9/1 12:00am'],
                    ['American International Group, Inc.',64.13,0.31,0.49,'9/1 12:00am'],
                    ['AT&T Inc.',31.61,-0.48,-1.54,'9/1 12:00am'],
                    ['Boeing Co.',75.43,0.53,0.71,'9/1 12:00am'],
                    ['Caterpillar Inc.',67.27,0.92,1.39,'9/1 12:00am'],
                    ['Citigroup, Inc.',49.37,0.02,0.04,'9/1 12:00am'],
                    ['E.I. du Pont de Nemours and Company',40.48,0.51,1.28,'9/1 12:00am'],
                    ['Exxon Mobil Corp',68.1,-0.43,-0.64,'9/1 12:00am'],
                    ['General Electric Company',34.14,-0.08,-0.23,'9/1 12:00am'],
                    ['General Motors Corporation',30.27,1.09,3.74,'9/1 12:00am'],
                    ['Hewlett-Packard Co.',36.53,-0.03,-0.08,'9/1 12:00am'],
                    ['Honeywell Intl Inc',38.77,0.05,0.13,'9/1 12:00am'],
                    ['Intel Corporation',19.88,0.31,1.58,'9/1 12:00am'],
                    ['International Business Machines',81.41,0.44,0.54,'9/1 12:00am'],
                    ['Johnson & Johnson',64.72,0.06,0.09,'9/1 12:00am'],
                    ['JP Morgan & Chase & Co',45.73,0.07,0.15,'9/1 12:00am'],
                    ['McDonald\'s Corporation',36.76,0.86,2.40,'9/1 12:00am'],
                    ['Merck & Co., Inc.',40.96,0.41,1.01,'9/1 12:00am'],
                    ['Microsoft Corporation',25.84,0.14,0.54,'9/1 12:00am'],
                    ['Pfizer Inc',27.96,0.4,1.45,'9/1 12:00am'],
                    ['The Coca-Cola Company',45.07,0.26,0.58,'9/1 12:00am'],
                    ['The Home Depot, Inc.',34.64,0.35,1.02,'9/1 12:00am'],
                    ['The Procter & Gamble Company',61.91,0.01,0.02,'9/1 12:00am'],
                    ['United Technologies Corporation',63.26,0.55,0.88,'9/1 12:00am'],
                    ['Verizon Communications',35.57,0.39,1.11,'9/1 12:00am'],
                    ['Wal-Mart Stores, Inc.',45.45,0.73,1.63,'9/1 12:00am']
                ];

                /**
                 * Custom function used for column renderer
                 * @param {Object} val
                 */
                function change(val){
                    if(val > 0){
                        return '<span style="color:green;">' + val + '</span>';
                    }else if(val < 0){
                        return '<span style="color:red;">' + val + '</span>';
                    }
                    return val;
                }

                /**
                 * Custom function used for column renderer
                 * @param {Object} val
                 */
                function pctChange(val){
                    if(val > 0){
                        return '<span style="color:green;">' + val + '%</span>';
                    }else if(val < 0){
                        return '<span style="color:red;">' + val + '%</span>';
                    }
                    return val;
                }

                // create the data store
                var store = new Ext.data.ArrayStore({
                    fields: [
                        {name: 'company'},
                        {name: 'price', type: 'float'},
                        {name: 'change', type: 'float'},
                        {name: 'pctChange', type: 'float'},
                        {name: 'lastChange', type: 'date', dateFormat: 'n/j h:ia'}
                    ]
                });

                // manually load local data
                store.loadData(myData);

                // create the Data Store
                var store = new Ext.data.JsonStore({
                    root: 'topics',
                    totalProperty: 'totalCount',
                    idProperty: 'threadid',
                    remoteSort: true,

                    fields: [
                        'title', 'forumtitle', 'forumid', 'author',
                        {name: 'replycount', type: 'int'},
                        {name: 'lastpost', mapping: 'lastpost', type: 'date', dateFormat: 'timestamp'},
                        'lastposter', 'excerpt'
                    ],

                    // load using script tags for cross domain, if the data in on the same domain as
                    // this page, an HttpProxy would be better
                    proxy: new Ext.data.ScriptTagProxy({
                        url: 'http://extjs.com/forum/topics-browse-remote.php'
                    })
                });
                store.setDefaultSort('lastpost', 'desc');


                // pluggable renders
                function renderTopic(value, p, record){
                    return String.format(
                    '<b><a href="http://extjs.com/forum/showthread.php?t={2}" target="_blank">{0}</a></b><a href="http://extjs.com/forum/forumdisplay.php?f={3}" target="_blank">{1} Forum</a>',
                    value, record.data.forumtitle, record.id, record.data.forumid);
                }
                function renderLast(value, p, r){
                    return String.format('{0}<br/>by {1}', value.dateFormat('M j, Y, g:i a'), r.data['lastposter']);
                }
                
                var tb = new Ext.Toolbar({
                    items  : ['Sorting order:', '-'],
                    //  plugins: [reorderer],
                    listeners: {
                        scope    : this,
                        reordered: function(button) {
                            changeSortDirection(button, false);
                        }
                    }
                });

                var tbar = new Ext.Toolbar({
                    /*     renderTo: document.body,
                    width: 600,
                    height: 100,*/
                    items: [
                        {
                            xtype: 'button',
                            text: 'Receber',
                            iconCls: 'add16'

                        },
                        {
                            xtype: 'button',
                            text: 'Receber',
                            iconCls: 'add16'
                        },
                        // begin using the right-justified button container
                        '->', // same as {xtype: 'tbfill'}, // Ext.Toolbar.Fill
                        'Pesquisar:', // same as {xtype: 'tbfill'}, // Ext.Toolbar.Fill
                        {
                            xtype: 'textfield',
                            name: 'field1',
                            emptyText: 'Pesquisar'
                        },
                        {
                            xtype: 'button', // same as 'tbsplitbutton'
                            text: 'OK'
                        }
                        // add a vertical separator bar between toolbar items
                        //  '-', // same as {xtype: 'tbseparator'} to create Ext.Toolbar.Separator
                        //   'text 1', // same as {xtype: 'tbtext', text: 'text1'} to create Ext.Toolbar.TextItem
                        //  {xtype: 'tbspacer'},// same as ' ' to create Ext.Toolbar.Spacer
                        //   'text 2',
                        //   {xtype: 'tbspacer', width: 50}, // add a 50px space
                        //   'text 3'
                    ]
                });

                // create the Grid
                var grid = new Ext.grid.GridPanel({
                    tbar : tbar,
                    forceFit: true,
                    width:600,
                    height:600,
                    split: true,
                    title:'Listagem de Documentos e Processos',
                    store: store,
                    trackMouseOver:true,
                    disableSelection:false,
                    loadMask: true,
                    layout: 'fit',

                    // grid columns
                    columns:[{
                            id: 'topic', // id assigned so we can apply custom css (e.g. .x-grid-col-topic b { color:#333 })
                            header: "Digital",
                            dataIndex: 'title',
                            width: 420,
                            renderer: renderTopic,
                            sortable: true
                        },{
                            header: "Tipo",
                            dataIndex: 'author',
                            width: 100,
                            hidden: true,
                            sortable: true
                        },{
                            header: "Numero",
                            dataIndex: 'replycount',
                            width: 70,
                            align: 'right',
                            sortable: true
                        },{
                            id: 'last',
                            header: "Assunto",
                            dataIndex: 'lastpost',
                            width: 150,
                            renderer: renderLast,
                            sortable: true
                        }],

                    // customize view config
                    viewConfig: {
                        forceFit:true,
                        enableRowBody:true,
                        showPreview:true,
                        getRowClass : function(record, rowIndex, p, store){
                            if(this.showPreview){
                                p.body = '<p>'+record.data.excerpt+'</p>';
                                return 'x-grid3-row-expanded';
                            }
                            return 'x-grid3-row-collapsed';
                        }
                    },

                    // paging bar on the bottom
                    bbar: new Ext.PagingToolbar({
                        pageSize: 25,
                        store: store,
                        displayInfo: true,
                        forceFit:true,
                        displayMsg: 'Mostrando {0} - {1} de {2}',
                        emptyMsg: "Nenhum item encotrado",
                        items:[
                            '-', {
                                pressed: true,
                                enableToggle:true,
                                text: 'Detalhes',
                                cls: 'x-btn-text-icon details',
                                toggleHandler: function(btn, pressed){
                                    var view = grid.getView();
                                    view.showPreview = pressed;
                                    view.refresh();
                                }
                            }]
                    })
                });

                var detailsPanel = {
                    id: 'details-panel',
                    title: 'Informacoes',
                    region: 'west',
                    html: '<div id="container"></div>',
                    bodyStyle: 'padding-bottom:15px;background:#eee;',
                    autoScroll: true
                    //  html: '<p class="details-info">Informacoes Importantes.</p>'
                };
	


            
                /*                                     SGDOC-FINAL                                    */

                // NOTE: This is an example showing simple state management. During development,
                // it is generally best to disable state management as dynamically-generated ids
                // can change across page loads, leading to unpredictable results.  The developer
                // should ensure that stable state ids are set for stateful components in real apps.

                Ext.state.Manager.setProvider(new Ext.state.CookieProvider());
        
                var viewport = new Ext.Viewport({
                    layout: 'border',
                    items: [
                        // create instance immediately
                        new Ext.BoxComponent({
                            region: 'north',
                            split: false,
                            height: 70, // give north and south regions a height
                            autoEl: {
                                tag: 'div',
                                html: imgCabecalho
                            }
                        }), {
                            // lazily created panel (xtype:'panel' is default)
                            region: 'south',
                            contentEl: 'south',
                            split: true,
                            height: 100,
                            items: meuGrafico,
                            //  minSize: 100,
                            //  maxSize: 200,
                            collapsible: true,
                            title: 'Visualizacao',
                            margins: '0 0 0 0'
                        }, {
                            region: 'east',
                            id: 'east-panel',
                            title: 'Notificacoes',
                            collapsible: true,
                            split: true,
                            width: 225, // give east and west regions a width
                            minSize: 175,
                            maxSize: 400,
                            margins: '0 5 0 0',
                            layout: 'fit', // specify layout manager for items
                            items:            // this TabPanel is wrapped by another Panel so the title will be applied
                            new Ext.TabPanel({
                                border: false, // already wrapped so don't add another border
                                activeTab: 1, // second tab initially active
                                tabPosition: 'bottom',
                                items: [{
                                        html: '<p>A TabPanel component can be a region.</p>',
                                        title: 'A Tab',
                                        autoScroll: true
                                    }, new Ext.grid.PropertyGrid({
                                        title: 'Property Grid',
                                        closable: true,
                                        source: {
                                            "(name)": "Properties Grid",
                                            "grouping": false,
                                            "autoFitColumns": true,
                                            "productionQuality": false,
                                            "created": new Date(Date.parse('10/15/2006')),
                                            "tested": false,
                                            "version": 0.01,
                                            "borderWidth": 1
                                        }
                                    })]
                            })
                        }, {
                            region: 'west',
                            id: 'west-panel', // see Ext.getCmp() below
                            title: 'Menu Principal',
                            split: true,
                            width: 200,
                            minSize: 175,
                            maxSize: 400,
                            collapsible: true,
                            margins: '0 0 0 5',
                            layout: {
                                type: 'accordion',
                                animate: true
                            },
                            items: [{
                                    contentEl: 'west',
                                    html: divArvoreMenus, //add sgdoc
                                    title: 'Caixas',
                                    border: false,
                                    iconCls: 'nav' // see the HEAD section for style used
                                }, {
                                    title: 'Pesquisar',
                                    html: 'Documentos<input>Processos<input>Despachos<input>Historicos<input>Comentarios<input><button value="Pesquisar">',
                                    border: false,
                                    iconCls: 'settings'
                                }, {
                                    title: 'Onde esta Meu Documento',
                                    html: 'Documentos<input>Processos<input>Despachos<input>Historicos<input>Comentarios<input><button value="Pesquisar">',
                                    border: false,
                                    iconCls: 'settings'
                                }, {
                                    title: 'Controle de Prazos',
                                    html: 'Documentos<input>Processos<input>Despachos<input>Historicos<input>Comentarios<input><button value="Pesquisar">',
                                    border: false,
                                    iconCls: 'settings'
                                }, {
                                    title: 'Cadastrar Documentos',
                                    html: 'Documentos<input>Processos<input>Despachos<input>Historicos<input>Comentarios<input><img value="Pesquisar">',
                                    border: false,
                                    iconCls: 'settings'
                                },[detailsPanel]]
                        },
                       
                        // in this instance the TabPanel is not wrapped by another panel
                        // since no title is needed, this Panel is added directly
                        // as a Container
                        new Ext.TabPanel({
                            region: 'center', // a center region is ALWAYS required for border layout
                            deferredRender: false,
                            activeTab: 0,     // first tab initially active
                            items: [{
                                    contentEl: 'center1',
                                    title: 'Caixa Entrada',
                                    html: divCaixaEntrada,
                                    closable: true,
                                    autoScroll: true
                                }, {
                                    contentEl: 'center2',
                                    html: divCaixaSaida,
                                    closable: true,
                                    title: 'Caixa de Saida',
                                    autoScroll: true
                                },
                                {
                                    closable: true,
                                    title: 'Anexacao',
                                    autoScroll: true
                                },{
                                    title: 'Cadastro de Documentos',
                                    closable: true,
                                    autoScroll: true,
                                    items: [
                                        new Ext.grid.PropertyGrid({
                                            title: 'Novo Documento',
                                            closable: true,
                                            source: {
                                                "Digital": "",
                                                "Numero": false,
                                                "Tipo": true,
                                                "Assunto": false,
                                                "Data do Documento": new Date(Date.parse('10/15/2006')),
                                                "Origem": false,
                                                "Destino": 0.01,
                                                "Confidencial": false,
                                                "Procedencia": false
                                            }
                                        })]
                                }]
                        })]
                });
                // get a reference to the HTML element with id "hideit" and add a click listener to it
                Ext.get("hideit").on('click', function(){
                    // get a reference to the Panel that was created with id = 'west-panel'
                    var w = Ext.getCmp('west-panel');
                    // expand or collapse that Panel based on its collapsed property state
                    w.collapsed ? w.expand() : w.collapse();

                    // var e = Ext.getCmp('east-panel');
                    // expand or collapse that Panel based on its collapsed property state
                    //  e.collapsed ? e.expand() : e.collapse();
                });

                // render the tree
                tree.render('tree-div');
                tree.getRootNode().expand();

                // render the grid to the specified div in the page
                grid.render('caixa-entrada-div');
                grid.render('caixa-saida-div');

                /*             GRAFICO - INICIO     */

                var store_grafico = new Ext.data.JsonStore({
                    fields: ['season', 'total'],
                    data: [{
                            season: 'Summer',
                            total: 150
                        },{
                            season: 'Fall',
                            total: 245
                        },{
                            season: 'Winter',
                            total: 117
                        },{
                            season: 'Spring',
                            total: 184
                        }]
                });

                var meuGrafico = new Ext.Panel({
                    //     width: 400,
                    //    height: 400,
                    title: 'Pie Chart with Legend - Favorite Season',
                    renderTo: 'container',
                    items: {
                        store: store_grafico,
                        xtype: 'piechart',
                        dataField: 'total',
                        categoryField: 'season',
                        //extra styles get applied to the chart defaults
                        extraStyle:
                            {
                            legend:
                                {
                                display: 'bottom',
                                padding: 5,
                                font:
                                    {
                                    family: 'Tahoma',
                                    size: 13
                                }
                            }
                        }
                    }
                });

                /*             GRAFICO - FINAL     */

            });
        </script>
    </head>
    <body>
        <!-- use class="x-hide-display" to prevent a brief flicker of the content -->
        <div id="west" class="x-hide-display">
            <p></p>
        </div>
        <div id="center2" class="x-hide-display">
            <a id="hideit" href="#">Expandir esta caixa!</a>
            <p>Lista Caixa de Saida</p>
        </div>
        <div id="center1" class="x-hide-display">
        </div>
        <div id="props-panel" class="x-hide-display" style="width:200px;height:200px;overflow:hidden;">
        </div>
        <div id="south" class="x-hide-display">
            <p>Visualizacao do Documento ou Processo Selecionado</p>
        </div>
    </body>
</html>